{% extends 'base.html' %}

{% block head %}

<title>My Assessments</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style/assessmentStatsStyle.css') }}">

{% endblock %}

{% block body %}

<div class="content-tables">

  <!--Section for the tables with student information-->
  <div>
    <table class="my-completed-assessments-table">

      <thead>
        <tr class="active-row">
          <th scope="col">User ID</th>
          <th scope="col">Number of Completed Assessments</th>
          <th scope="col">Action</th>
        </tr>
      </thead>

      <tbody>

        <tr>
          <!--User ID-->
          <td>{{ current_user.id }}</td>
          <!-- Number of completed assessments -->
          <td>{{ num_of_assessments }}</td>
          <td><a href="{{ url_for('completed_assessments', user_id=current_user.id)}}">View All Completed
              Assessments</a></td>
          <!--Change link to correspond with fetched data-->
        </tr>

      </tbody>

    </table>
  </div>

  <!--Section for the tables with assessment information -->
  <div>
    {%for mod1 in enrolled_mod%}
    <table class="my-assessments-table">

      <thead>
        <tr>
          <th scope="col" colspan="5">{{mod_names[mod1]}}</th>
        </tr>
        <tr>
          <th scope="col">Assessment(s)</th>
          <th scope="col">Assessment Start Date</th>
          <th scope="col">Assessment Due Date</th>
          <th scope="col">Mark</th>
          <th scope="col">Action</th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <th scope="col" colspan="5">Completed</th>
        </tr>
        {%for a in Assessments[mod1] %}
        <tr>
          <td>{{a.assessment_name}}</td>
          <!--Fetched data comes here-->
          <td>23/03/2021</td>
          <!--Fetched data comes here-->
          <td>{{a.end_date}}</td>
          <!--Fetched data comes here-->
          <td>{{Assess_results[a.id]}}</td>
          <!--Fetched data comes here-->
          <td><a href="">View</a></td>
          <!--Change link to correspond with fetched data-->
        </tr>
        {%endfor%}
        <tr>
          <th scope="col" colspan="5">Upcoming</th>
        </tr>
        <tr>
          <td>Assessment 3</td>
          <!--Fetched data comes here-->
          <td>23/03/2022</td>
          <!--Fetched data comes here-->
          <td>23/03/2022</td>
          <!--Fetched data comes here-->
          <td></td>
          <!--Fetched data comes here-->
          <td><a href="">View</a></td>
          <!--Change link to take assessment page-->
        </tr>
      </tbody>

      <tfoot>
        <tr>
          <td colspan="5">Have an issue with your marks? <a href="">Report here</a></td>
          <!--Add link to Report Issue page-->
        </tr>
      </tfoot>

    </table>
    {%endfor%}

  </div>

</div>

{% endblock %}
